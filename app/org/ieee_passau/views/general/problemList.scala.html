@import org.ieee_passau.controllers.Beans.ProblemInfo
@import org.ieee_passau.models.{Best, Dynamic, Static, User}
@import org.ieee_passau.utils.ViewHelper.showCheckmark
@import org.ieee_passau.views.html.main
@import play.api.i18n.{Lang, MessagesApi}
@import play.api.mvc.Flash
@(problems: List[ProblemInfo], notification: (String, String))(implicit flash: Flash, sessionUser: Option[User], requestHeader: RequestHeader, messagesApi: MessagesApi, lang: Lang)

@main(messagesApi("nav.problems")) {
    <table class="table table-striped">
        <thead>
            <tr>
                <th>@messagesApi("problem.door")</th>
                <th>@messagesApi("problem.name")</th>
                <th class="text-right">@messagesApi("testcase.points")</th>
                <th>@messagesApi("problem.evalmode")</th>
                <th>@messagesApi("submissions.tries")</th>
                <th>@messagesApi("submissions.solves")</th>
                @if(sessionUser.nonEmpty) {
                    <th>@messagesApi("submissions.solved")</th>
                }
            </tr>
        </thead>
        <tbody>
        @problems.map { problem =>
            <tr class="@if(problem.solved) {success} @if(problem.ownPoints != 0 && !problem.solved) {warning}">
                <td>@problem.door</td>
                <td><a href="@org.ieee_passau.controllers.routes.MainController.problemDetails(problem.door)">@problem.name</a></td>
                <td class="text-right">@if(sessionUser.nonEmpty) { @problem.ownPoints /} @problem.points</td>
                <td>@messagesApi(problem.evalMode.toString)</td>
                <td>@problem.tries</td>
                <td>@problem.correctSolutions</td>
                @if(sessionUser.nonEmpty) {
                    <td>@showCheckmark(problem.solved)</td>
                }
            </tr>
        }
        </tbody>
    </table>
    <p>@if(problems.isEmpty) { @Html(messagesApi("problem.list.empty")) }</p>
}(flash = (flash + notification), sessionUser, requestHeader, messagesApi, lang)

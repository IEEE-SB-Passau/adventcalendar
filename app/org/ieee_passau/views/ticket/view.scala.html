@import org.ieee_passau.controllers.Beans.TicketText
@import org.ieee_passau.models.{Problem, Ticket, User}
@import org.ieee_passau.views.html.bootstrap3.{buttonSave, checkboxBs, textareaBs}
@import org.ieee_passau.views.html.main
@import play.api.data.Form
@import play.api.i18n.{Lang, MessagesApi}
@import play.api.mvc.{Flash, RequestHeader}
@import play.twirl.api.TemplateMagic._
@import views.html.helper.{CSRF, form}
@(ticket: (Ticket, User, Problem), answers: List[(Ticket, String)], ticketForm: Form[TicketText])(implicit flash: Flash, sessionUser: Option[User], requestHeader: RequestHeader, messagesApi: MessagesApi, lang: Lang)

@main(messagesApi("ticket.list.show")) {
    @defining((ticket._1, ticket._2.username) +: answers) { list: List[(Ticket, String)] =>
        @ticketView(list, expanded = true, admin = true)
    }

    @form(org.ieee_passau.controllers.routes.TicketController.answerTicket(ticket._1.id.get), 'class -> "form-horizontal") {
        @CSRF.formField
        <div class="well">
            <div class="form-group">
                <label class="col-sm-2 control-label">@messagesApi("general.language")</label>
                <div class="col-sm-10">
                    <input type="text"
                           class="form-control"
                           value="@messagesApi("language.name")(ticket._1.language)"
                           disabled/>
                    <input type="hidden" name="title" value="@ticket._1.language.code" />
                    <span class="help-block"></span>
                </div>
            </div>
            @checkboxBs(ticketForm("public"), label = messagesApi("ticket.public"))
            @textareaBs(ticketForm("text"), label = messagesApi("ticket.answers.title"))
            @buttonSave()
        </div>
    }
}

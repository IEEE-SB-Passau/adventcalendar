@import java.util.Date

@import helper._
@import org.ieee_passau.models.User
@import org.ieee_passau.views.html.main
@import play.api.i18n.Lang
@import play.api.mvc.{Flash, RequestHeader}
@(list: List[(Int, Int, Int, Int, String, String, Int, String, Date, Option[Date])])(implicit flash: Flash, sessionUser: Option[User], requestHeader: RequestHeader, lang: Lang)

@* TODO i18n *@
@main("Queued") {
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Abgabe / Testfall / Schritt</th>
                <th>Problem</th>
                <th>Benutzer</th>
                <th>Sprache</th>
                <th>Erstellt</th>
                <th>Status</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
        @list.map {case (rid, sid, cid, stage, language, user, door, title, dateSub, dateQueued) =>
            <tr>
                <td><a href="@org.ieee_passau.controllers.routes.EvaluationController.details(sid)">@sid</a> / @cid / @stage</td>
                <td>@door @title</td>
                <td>@user</td>
                <td>@language</td>
                <td><abbr class="timeago" title="@dateSub.format("yyyy-MM-dd'T'HH:mmZ")">@dateSub.format("dd.MM.yyyy HH:mm")</abbr></td>
                <td>@if(dateQueued.isDefined) {
                    Zugeteilt <abbr class="timeago" title="@dateQueued.get.format("yyyy-MM-dd'T'HH:mmZ")">@dateQueued.get.format("dd.MM.yyyy HH:mm")</abbr>
                } else {
                    Ausstehend
                }</td>
                <td>
                    <form style="display: inline" method="POST" action="@org.ieee_passau.controllers.routes.EvaluationController.cancel(rid)">
                        @CSRF.formField
                        <button type="submit" onclick="return(window.confirm('Wirklich lÃ¶schen?'))" class="btn btn-danger"><span class="glyphicon glyphicon-remove"></span></button>
                    </form>
                </td>
            </tr>
        }
        </tbody>
    </table>
}

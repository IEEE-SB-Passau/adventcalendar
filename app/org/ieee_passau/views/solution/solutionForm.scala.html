@import org.ieee_passau.models.{Language, Page}
@import play.api.i18n.Lang
@import play.api.mvc.RequestHeader
@import views.html.helper.CSRF
@(door: Int, languages: List[Language], lastLanguage: String)(implicit requestHeader: RequestHeader, lang: Lang)

@* TODO i18n *@
<form id="submissionForm" action="#" method="post" enctype="multipart/form-data" class="form-horizontal">
    @CSRF.formField
    <fieldset>
        <div class="form-group" >
            <label for="lang" class="col-sm-2 control-label">Programmier&shy;sprache</label>
            <div class="col-sm-10">
                <select id="lang" size="1" name="lang" class="col-sm-10 form-control">
                @languages.map { lang =>
                    <option value="@lang.id" @{if(lang.id == lastLanguage) "selected" }>@lang.name</option>
                }
                </select>
            </div>
        </div>

        <div class="form-group" >
            <label class="col-sm-2 control-label">Quelltext</label>
            <div class="col-sm-10">
                <div class="input-group">
                    <span class="input-group-btn">
                        <span class="btn btn-default btn-file">
                            Datei  <input id="solution" type="file" name="solution"/>
                        </span>
                    </span>
                    <input id="filename" type="text" class="col-sm-10 form-control" readonly title="">
                </div>

                <p><small>*Bei Java und Scala bitte die Main-Methode in der Klasse bzw. dem Objekt "Solution" einreichen und kein Package verwenden.</small></p>
                <p><small>Falls dir dein Programm Probleme bereitet, werfe doch einen Blick in die <a href="@org.ieee_passau.controllers.routes.MainController.content(Page.faq.toString)">FAQ</a> oder seh dir unsere <a href="@org.ieee_passau.controllers.routes.MainController.content(Page.examples.toString)">Beispielprogramme</a> an.</small></p>
            </div>
        </div>

        <div class="form-group">
            <div class="col-sm-offset-2 col-sm-2">
                <input id="defaultSubmit" type="submit" value="@Messages("submit.submit")" class="btn btn-primary"/>
            </div>

            <div class="col-sm-2">
                <button id="loadEditor" type="button" onclick="loadCodeEditor();" class="btn btn-primary">@Messages("submit.codeeditor.load")</button>
            </div>
        </div>

        <div id="codeEditor"></div>
    </fieldset>

    <script type="text/javascript">
        var reloadMessage = '@Messages("submit.codeeditor.reload")';

        function loadCodeEditor() {
            $.ajax({
                url: "@org.ieee_passau.controllers.routes.MainController.codeEditor(door)"
            }).done(function (data) {
                $("#codeEditor").html(data);
            });

            $("#defaultSubmit")[0].classList = "btn btn-default";
            var editorButton = $("#loadEditor")[0];
            editorButton.classList = "btn btn-warning";
            editorButton.innerHTML = reloadMessage;
        }
    </script>
</form>
